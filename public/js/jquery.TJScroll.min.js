(function(a){a.fn.TJScroll=function(b){function c(b){var c={},d,g;a.each(b[0].attributes,function(){d=this.nodeName;g=this.nodeValue;if(-1<d.indexOf("data-")){var b=d.substring(5).split("-"),e="";a.each(b,function(a){e=0<a?e+(this.charAt(0).toUpperCase()+this.slice(1)):e+this});d=e;d in TJScroll.defaultOptions&&(g="true"==g?!0:g,g="false"==g?!1:g,c[d]=g)}});return c}var d=a.extend({},TJScroll.defaultOptions,b);this.each(function(){var b=a(this);a.extend(d,c(b));b=new TJScroll(b,d);a(this).data("TJScroll",
b);b.init()});return this}})(jQuery);
var TJScroll=function(a,b){this.$wrapper=a;this.$scroller=this.$wrapper.children().eq(0);this.options=b;this.y=this.x=0;this.steps=[];this.moved=this.animating=!1;this.aniTime=null;this.dirY=this.dirX=this.maxScrollY=this.maxScrollX=this.scrollerH=this.scrollerW=this.minScrollY=this.wrapperH=this.wrapperW=0;this.vScrollbar=this.hScrollbar=this.vScroll=this.hScroll=!1;this.$vScrollbarIndicator=this.$hScrollbarIndicator=this.$vScrollbarWrapper=this.$hScrollbarWrapper=this.barActiveDir=null;this.wrapperOffsetTop=
this.wrapperOffsetLeft=0;this.pagesX=[];this.pagesY=[];this.enabled=!0;this.currPageY=this.currPageX=0};TJScroll.mround=function(a){return a>>0};TJScroll.vendor=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":"";TJScroll.isAndroid=/android/gi.test(navigator.appVersion);TJScroll.isIDevice=/iphone|ipad/gi.test(navigator.appVersion);TJScroll.isPlaybook=/playbook/gi.test(navigator.appVersion);
TJScroll.isTouchPad=/hp-tablet/gi.test(navigator.appVersion);TJScroll.has3d=Modernizr.csstransforms3d;TJScroll.hasTouch=Modernizr.touch;TJScroll.hasTransform=Modernizr.csstransforms;TJScroll.hasTransitionEnd=Modernizr.csstransitions;TJScroll.RESIZE_EV="onorientationchange"in window?"orientationchange":"resize";TJScroll.START_EV=TJScroll.hasTouch?"touchstart":"mousedown";TJScroll.MOVE_EV=TJScroll.hasTouch?"touchmove":"mousemove";TJScroll.END_EV=TJScroll.hasTouch?"touchend":"mouseup";
TJScroll.CANCEL_EV=TJScroll.hasTouch?"touchcancel":"mouseup";TJScroll.WHEEL_EV=$.fn.mwheelIntent?"mwheelIntent":$.fn.mousewheel?"mousewheel":null;TJScroll.trnOpen="translate"+(TJScroll.has3d?"3d(":"(");TJScroll.trnClose=TJScroll.has3d?",0)":")";
TJScroll.defaultOptions={hScroll:!0,vScroll:!0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,ease:"easeInOutQuad",testTouch:!1,enabled:!0,x:0,y:0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:TJScroll.isAndroid,hideScrollbar:TJScroll.isIDevice,fadeScrollbar:TJScroll.isIDevice&&TJScroll.has3d,scrollbarClass:"scrollBar",mouseWheelSpeed:30,mouseWheelEnabled:!0,snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},
onAnimationEnd:null,onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onPositionChange:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};
TJScroll.prototype.init=function(){this.options.useTransform=TJScroll.hasTransform?this.options.useTransform:!1;this.options.useTransition=TJScroll.hasTransitionEnd?this.options.useTransition:!1;this.options.hScrollbar=this.options.hScroll&&this.options.hScrollbar;this.options.vScrollbar=this.options.vScroll&&this.options.vScrollbar;this.enabled=this.options.enabled;this.x=this.options.x;this.y=this.options.y;var a={};a[TJScroll.vendor+"TransitionProperty"]=this.options.useTransform?"-"+TJScroll.vendor.toLowerCase()+
"-transform":"top left";this.options.useTransition&&(a[TJScroll.vendor+"TransitionDuration"]="5",a[TJScroll.vendor+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)");this.options.useTransform?a[TJScroll.vendor+"TransformOrigin"]="0 0":a.position="absolute";this.getPositionCss(a,this.x,this.y);this.$scroller.css(a);this.refresh()};
TJScroll.prototype.onTouchStart=function(a){a.touches=a.originalEvent.touches;var b=this,c=TJScroll.hasTouch?a.touches[0]:a,d,e;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,a);this.options.useTransition&&this.setTransitionTime(0);this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;if(this.options.momentum&&(this.options.useTransform?(d=this.$scroller.css("-"+TJScroll.vendor+"-transform").replace(/[^0-9-.,]/g,
"").split(","),e=1*d[4],d=1*d[5]):(e=1*this.$scroller.css("left").replace(/[^0-9-]/g,""),d=1*this.$scroller.css("top").replace(/[^0-9-]/g,"")),e!=this.x||d!=this.y))this.options.useTransition?this.$scroller.unbind("webkitTransitionEnd"):cancelAnimationFrame(this.aniTime),this.steps=[],this.setPosition(e,d);this.absStartX=this.x;this.absStartY=this.y;this.startX=this.x;this.startY=this.y;this.pointX=c.pageX;this.pointY=c.pageY;this.startTime=a.timeStamp?a.timeStamp:(new Date).getTime();this.options.onScrollStart&&
this.options.onScrollStart.call(this,a);this.$scroller.bind(TJScroll.MOVE_EV,function(a){b.onTouchMove(a)});this.$scroller.bind(TJScroll.END_EV,function(a){b.onTouchEnd(a)});this.$scroller.bind(TJScroll.CANCEL_EV,function(a){b.onTouchEnd(a)})}};
TJScroll.prototype.onTouchMove=function(a){a.touches=a.originalEvent.touches;var b=TJScroll.hasTouch?a.touches[0]:a,c=b.pageX-this.pointX,d=b.pageY-this.pointY,e=this.x+c,f=this.y+d,h;h=a.timeStamp?a.timeStamp:(new Date).getTime();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,a);this.pointX=b.pageX;this.pointY=b.pageY;if(0<e||e<this.maxScrollX)e=this.options.bounce?this.x+c/2:0<=e||0<=this.maxScrollX?0:this.maxScrollX;if(f>this.minScrollY||f<this.maxScrollY)f=this.options.bounce?
this.y+d/2:f>=this.minScrollY||0<=this.maxScrollY?this.minScrollY:this.maxScrollY;this.distX+=c;this.distY+=d;this.absDistX=Math.abs(this.distX);this.absDistY=Math.abs(this.distY);6>this.absDistX&&6>this.absDistY||(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(f=this.y,d=0):this.absDistY>this.absDistX+5&&(e=this.x,c=0)),this.moved=!0,this.setPosition(e,f),this.dirX=0<c?-1:0>c?1:0,this.dirY=0<d?-1:0>d?1:0,300<h-this.startTime&&(this.startTime=h,this.startX=this.x,this.startY=this.y),
this.options.onScrollMove&&this.options.onScrollMove.call(this,a))};
TJScroll.prototype.onTouchEnd=function(a){a.touches=a.originalEvent.touches;if(!(TJScroll.hasTouch&&0!=a.touches.length)){a.changedTouches=a.originalEvent.changedTouches;var b=TJScroll.hasTouch?a.changedTouches[0]:a,c,d,e={dist:0,time:0},f={dist:0,time:0};c=this.x;d=this.y;var h;h=a.timestamp?a.timestamp-this.startTime:(new Date).getTime()-this.startTime;this.$scroller.unbind(TJScroll.MOVE_EV);this.$scroller.unbind(TJScroll.END_EV);this.$scroller.unbind(TJScroll.CANCEL_EV);this.options.onBeforeScrollEnd&&
this.options.onBeforeScrollEnd.call(this,a);if(this.moved){if(300>h&&this.options.momentum){e=c?this.calculateMomentum(c-this.startX,h,-this.x,this.scrollerW-this.wrapperW+this.x,this.options.bounce?this.wrapperW:0):e;f=d?this.calculateMomentum(d-this.startY,h,-this.y,0>this.maxScrollY?this.scrollerH-this.wrapperH+this.y-this.minScrollY:0,this.options.bounce?this.wrapperH:0):f;c=this.x+e.dist;d=this.y+f.dist;if(0<this.x&&0<c||this.x<this.maxScrollX&&c<this.maxScrollX)e={dist:0,time:0};if(this.y>this.minScrollY&&
d>this.minScrollY||this.y<this.maxScrollY&&d<this.maxScrollY)f={dist:0,time:0}}e.dist||f.dist?(b=Math.max(Math.max(e.time,f.time),10),this.options.snap&&(e=c-this.absStartX,f=d-this.absStartY,Math.abs(e)<this.options.snapThreshold&&Math.abs(f)<this.options.snapThreshold?this.scrollTo(this.absStartX,this.absStartY,200):(e=this.calculateSnap(c,d),c=e.x,d=e.y,b=Math.max(e.time,b))),this.scrollTo(TJScroll.mround(c),TJScroll.mround(d),b,!0)):this.options.snap?(e=c-this.absStartX,f=d-this.absStartY,Math.abs(e)<
this.options.snapThreshold&&Math.abs(f)<this.options.snapThreshold?this.scrollTo(this.absStartX,this.absStartY,200):(e=this.calculateSnap(this.x,this.y),(e.x!=this.x||e.y!=this.y)&&this.scrollTo(e.x,e.y,e.time))):this.resetPosition(200);this.options.onTouchEnd&&this.options.onTouchEnd.call(this,a)}else{if(TJScroll.hasTouch){for(c=$(b.target);1!=c[0].nodeType;)c=c.parent();"SELECT"!=c[0].tagName&&("INPUT"!=c[0].tagName&&"TEXTAREA"!=c[0].tagName)&&(d=document.createEvent("MouseEvents"),d.initMouseEvent("click",
!0,!0,a.view,1,b.screenX,b.screenY,b.clientX,b.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null),d._fake=!0,d=$.event.fix(d),c.trigger(d),d.isDefaultPrevented()||(d=c[0].getAttribute("href"),c=c[0].getAttribute("target"),null!=d&&(null!=c?window.open(d,c):window.open(d,"_self"))))}this.resetPosition(200);this.options.onTouchEnd&&this.options.onTouchEnd.call(that,a)}}};
TJScroll.prototype.onMouseWheel=function(a,b,c,d){this.enabled&&(a=this.x+c*this.options.mouseWheelSpeed,d=this.y+d*this.options.mouseWheelSpeed,0<a||!this.hScrollbar?a=0:a<this.maxScrollX&&(a=this.maxScrollX),d>this.minScrollY||!this.vScrollbar?d=this.minScrollY:d<this.maxScrollY&&(d=this.maxScrollY),a=TJScroll.mround(a),d=TJScroll.mround(d),this.setPosition(a,d))};TJScroll.prototype.onMouseOut=function(a){var b=a.relatedTarget;if(b)for(;b=b.parentNode;)if(b==this.wrapper)return;this.onTouchEnd(a)};
TJScroll.prototype.onWebkitTransitionEnd=function(){this.$scroller.unbind("webkitTransitionEnd");this.doAnimation()};
TJScroll.prototype.refresh=function(a){var b,c=0,d=0;a="undefined"!=typeof a?a:!0;this.wrapperW=this.$wrapper.outerWidth()||1;this.wrapperH=this.$wrapper.outerHeight()||1;this.minScrollY=-this.options.topOffset||0;this.scrollerW=this.$scroller.outerWidth(!0);this.scrollerH=this.$scroller.outerHeight(!0)+this.minScrollY;this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY;this.dirY=this.dirX=0;this.options.onRefresh&&this.options.onRefresh.call(this);
this.hScroll=this.options.hScroll&&0>this.maxScrollX;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;b=this.$wrapper.offset();this.wrapperOffsetLeft=-b.left;this.wrapperOffsetTop=-b.top;if("string"==typeof this.options.snap)this.pagesX=[],this.pagesY=[],b=this.$scroller.children(this.options.snap),b.each(function(a,
b){c=b.offset();c.left+=this.wrapperOffsetLeft;c.top+=this.wrapperOffsetTop;this.pagesX[void 0]=c.left<this.maxScrollX?this.maxScrollX:c.left;this.pagesY[void 0]=c.top<this.maxScrollY?this.maxScrollY:c.top});else if(this.options.snap){for(this.pagesX=[];c>=this.maxScrollX;)this.pagesX[d]=c,c-=this.wrapperW,d++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1]);d=c=0;for(this.pagesY=[];c>=this.maxScrollY;)this.pagesY[d]=
c,c-=this.wrapperH,d++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1])}this.createScrollbar("h");this.createScrollbar("v");this.setTransitionTime(0);a&&this.resetPosition(200);this.enabled&&this.enableInteraction()};
TJScroll.prototype.setPosition=function(a,b){this.$scroller.css(this.getPositionCss({},a,b));this.x=a;this.y=b;this.setScrollbarPosition("h");this.setScrollbarPosition("v");this.options.onPositionChange&&this.options.onPositionChange.call(this)};TJScroll.prototype.scrollTo=function(a,b,c,d){var e=a;this.stop();e.length||(e=[{x:a,y:b,time:c}]);a=0;for(b=e.length;a<b;++a)this.steps.push({x:e[a].x,y:e[a].y,time:e[a].time||0});this.doAnimation(d)};
TJScroll.prototype.disable=function(){this.stop();this.resetPosition(0);this.enabled=!1;this.$scroller.unbind(TJScroll.MOVE_EV);this.$scroller.unbind(TJScroll.END_EV);this.$scroller.unbind(TJScroll.CANCEL_EV);this.disableInteraction()};TJScroll.prototype.enable=function(){this.enabled=!0;this.enableInteraction()};TJScroll.prototype.stop=function(){this.options.useTransition?this.$scroller.unbind("webkitTransitionEnd"):cancelAnimationFrame(this.aniTime);this.steps=[];this.animating=this.moved=!1};
TJScroll.prototype.isReady=function(){return!this.moved&&!this.animating};TJScroll.prototype.hideScrollbars=function(){this.options.hideScrollbar=!0;this.hScrollbar&&this.hideScrollbar("h");this.vScrollbar&&this.hideScrollbar("v")};TJScroll.prototype.hideScrollbar=function(a){TJScroll.hasTransitionEnd?this["$"+a+"ScrollbarWrapper"].css({opacity:0}):this["$"+a+"ScrollbarWrapper"].animate({opacity:0},350)};
TJScroll.prototype.showScrollbars=function(){this.options.hideScrollbar=!1;this.hScrollbar&&this.showScrollbar("h");this.vScrollbar&&this.showScrollbar("v")};TJScroll.prototype.showScrollbar=function(a){TJScroll.hasTransitionEnd?this["$"+a+"ScrollbarWrapper"].css({opacity:1}):this["$"+a+"ScrollbarWrapper"].animate({opacity:1},350)};TJScroll.prototype.enableInteraction=function(){this.enableMouseWheel();this.enableTouchEvents();this.enableScrollDrag()};
TJScroll.prototype.disableInteraction=function(){this.disableMouseWheel();this.disableTouchEvents();this.disableScrollDrag()};TJScroll.prototype.enableMouseWheel=function(){var a=this;!TJScroll.hasTouch&&(this.options.mouseWheelEnabled&&TJScroll.WHEEL_EV)&&this.$wrapper.unbind("mousewheel").bind("mousewheel",function(b,c,d,e){a.onMouseWheel(b,c,d,e)})};TJScroll.prototype.disableMouseWheel=function(){!TJScroll.hasTouch&&(this.options.mouseWheelEnabled&&TJScroll.WHEEL_EV)&&this.$wrapper.unbind("mousewheel")};
TJScroll.prototype.enableTouchEvents=function(){var a=this;(TJScroll.hasTouch||this.options.testTouch)&&this.$wrapper.unbind(TJScroll.START_EV).bind(TJScroll.START_EV,function(b){if(TJScroll.hasTouch||0===b.button)a.onTouchStart(b)});!TJScroll.hasTouch&&this.options.testTouch&&this.$wrapper.unbind("mouseout").bind("mouseout",function(b){a.onMouseOut(b)})};
TJScroll.prototype.disableTouchEvents=function(){(TJScroll.hasTouch||this.options.testTouch)&&this.$wrapper.unbind(TJScroll.START_EV);!TJScroll.hasTouch&&this.options.testTouch&&this.$wrapper.unbind("mouseout")};
TJScroll.prototype.enableScrollDrag=function(){var a=this;!TJScroll.hasTouch&&!this.options.hideScrollbar&&(this.hScrollbar&&this.$hScrollbarIndicator.bind("mousedown",function(b){a.onScrollbarMouseDown(b)}).bind("mouseover",function(b){a.onScrollbarMouseOver(b)}).bind("mouseout",function(b){a.onScrollbarMouseOut(b)}),this.vScrollbar&&this.$vScrollbarIndicator.bind("mousedown",function(b){a.onScrollbarMouseDown(b)}).bind("mouseover",function(b){a.onScrollbarMouseOver(b)}).bind("mouseout",function(b){a.onScrollbarMouseOut(b)}))};
TJScroll.prototype.disableScrollDrag=function(){!TJScroll.hasTouch&&!this.options.hideScrollbar&&(this.hScrollbar&&this.$hScrollbarIndicator.unbind("mousedown").unbind("mouseover").unbind("mouseout").removeClass("hover"),this.vScrollbar&&this.$vScrollbarIndicator.unbind("mousedown").unbind("mouseover").unbind("mouseout").removeClass("hover"))};
TJScroll.prototype.onScrollbarMouseDown=function(a){var b=$(a.currentTarget),c=this;a.preventDefault();this.barStartX=this.x;this.barStartY=this.y;this.barDownX=a.pageX;this.barDownY=a.pageY;this.barActiveDir;if(this.hScrollbar&&b[0]==this.$hScrollbarIndicator[0])this.barActiveDir="h";else if(this.vScrollbar&&b[0]==this.$vScrollbarIndicator[0])this.barActiveDir="v";else return;$(document).bind("mouseup",function(a){c.onScrollbarMouseUp(a)}).bind("mousemove",function(a){c.onScrollbarMouseMove(a)})};
TJScroll.prototype.onScrollbarMouseMove=function(a){var b=a.pageX-this.barDownX;a=a.pageY-this.barDownY;var c=this[this.barActiveDir+"ScrollbarProp"];"h"==this.barActiveDir?(b=TJScroll.mround(this.barStartX+b/c),0<b?b=0:b<this.maxScrollX&&(b=this.maxScrollX),this.setPosition(b,0)):(b=TJScroll.mround(this.barStartY+a/c),b>this.minScrollY?b=this.minScrollY:b<this.maxScrollY&&(b=this.maxScrollY),this.setPosition(0,b))};
TJScroll.prototype.onScrollbarMouseUp=function(){this["$"+this.barActiveDir+"ScrollbarIndicator"].removeClass("hover");this.barActiveDir=null;$(document).unbind("mousemove").unbind("mouseup")};TJScroll.prototype.onScrollbarMouseOver=function(a){$(a.currentTarget).addClass("hover")};
TJScroll.prototype.onScrollbarMouseOut=function(a){var b=$(a.currentTarget);(null==this.barActiveDir||"h"==this.barActiveDir&&b[0]!=this.$hScrollbarIndicator[0]||"v"==this.barActiveDir&&b[0]!=this.$vScrollbarIndicator[0])&&$(a.currentTarget).removeClass("hover")};
TJScroll.prototype.createScrollbar=function(a){var b,c=this["$"+a+"ScrollbarWrapper"],d=this["$"+a+"ScrollbarIndicator"];this[a+"Scrollbar"]?(c||(c=$("<div></div>"),this.options.scrollbarClass&&c.attr("class",this.options.scrollbarClass+a.toUpperCase()),b={position:"absolute","z-index":100,overflow:"hidden"},"h"==a?(b.height=7,b.bottom=1,b.left=2,b.right=this.$vScrollbar?7:2):(b.width=7,b.bottom=this.$hScrollbar?7:2,b.top=2,b.right=1),TJScroll.hasTransitionEnd&&(b["-"+TJScroll.vendor+"-transition-property"]=
"opacity",b["-"+TJScroll.vendor+"-transition-duration"]=this.options.fadeScrollbar?"350ms":"0"),b.opacity=this.options.hideScrollbar?"0":"1",c.css(b),this.$wrapper.append(c),this["$"+a+"ScrollbarWrapper"]=c,d=$("<div></div>").attr("class",this.options.scrollbarClass+"Indicator"+a.toUpperCase()),b={position:"absolute","z-index":100,background:"#000",opacity:"0.5",border:"1px solid #fff","border-radius":"3px","box-sizing":"border-box"},"h"==a?b.height="100%":b.width="100%",b["-"+TJScroll.vendor.toLowerCase()+
"-background-clip"]="padding-box",b["-"+TJScroll.vendor.toLowerCase()+"-box-sizing"]="border-box",b["-"+TJScroll.vendor.toLowerCase()+"-border-radius"]="3px",this.options.useTransform?b["-"+TJScroll.vendor.toLowerCase()+"-transform"]=TJScroll.trnOpen+"0,0"+TJScroll.trnClose:(b.left=0,b.top=0),this.options.useTransition&&(b["-"+TJScroll.vendor.toLowerCase()+"-transition-property"]="-"+TJScroll.vendor+"-transform;",b["-"+TJScroll.vendor.toLowerCase()+"-transition-timing-function"]="cubic-bezier(0.33,0.66,0.66,1)",
b["-"+TJScroll.vendor.toLowerCase()+"-transition-duration"]=0),d.css(b),c.append(d),this["$"+a+"ScrollbarIndicator"]=d),"h"==a?(this.hScrollbarSize=this.$hScrollbarWrapper.width(),this.hScrollbarIndicatorSize=Math.max(TJScroll.mround(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW),8),this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX,this.$hScrollbarIndicator.width(this.hScrollbarIndicatorSize)):(this.vScrollbarSize=
this.$vScrollbarWrapper.height(),this.vScrollbarIndicatorSize=Math.max(TJScroll.mround(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH),8),this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY,this.$vScrollbarIndicator.height(this.vScrollbarIndicatorSize)),this.setScrollbarPosition(a,!0)):c&&(this.options.useTransform&&d.css(TJScroll.vendor+"Transform",""),c.remove(),this["$"+a+"ScrollbarWrapper"]=null,this["$"+
a+"ScrollbarIndicator"]=null)};
TJScroll.prototype.setScrollbarPosition=function(a,b){var c="h"==a?this.x:this.y,d,e;if(this[a+"Scrollbar"]){c*=this[a+"ScrollbarProp"];d=this["$"+a+"ScrollbarIndicator"];e=this["$"+a+"ScrollbarWrapper"];0>c?(this.options.fixedScrollbar||(c=this[a+"ScrollbarIndicatorSize"]+TJScroll.mround(3*c),8>c&&(c=8),"h"==a?d.width(c):d.height(c)),c=0):c>this[a+"ScrollbarMaxScroll"]&&(this.options.fixedScrollbar?c=this[a+"ScrollbarMaxScroll"]:(c=this[a+"ScrollbarIndicatorSize"]-TJScroll.mround(3*(c-this[a+"ScrollbarMaxScroll"])),
8>c&&(c=8),"h"==a?d.width(c):d.height(c),c=this[a+"ScrollbarMaxScroll"]+(this[a+"ScrollbarIndicatorSize"]-c)));var f={};f["-"+TJScroll.vendor+"-transition-delay"]="0";f.opacity=b&&this.options.hideScrollbar?"0":"1";e.css(f);f={};this.options.useTransform?f["-"+TJScroll.vendor+"-transform"]=TJScroll.trnOpen+("h"==a?c+"px,0":"0,"+c+"px")+TJScroll.trnClose:"h"==a?f.left=c:f.top=c;d.css(f)}};
TJScroll.prototype.doAnimation=function(a){a="undefined"==typeof a?!1:!0;var b=this,c=this.x,d=this.y,e=(new Date).getTime(),f,h;this.animating||(this.steps.length?(f=this.steps.shift(),f.x==c&&f.y==d&&(f.time=0),this.moved=this.animating=!0,this.options.useTransition?(this.setTransitionTime(f.time),this.setPosition(f.x,f.y),this.animating=!1,f.time?this.$scroller.bind("webkitTransitionEnd",function(a){b.onWebkitTransitionEnd(a)}):this.resetPosition(0)):(h=function(){var g=(new Date).getTime(),j,
k,l,n;if(g>=e+f.time)b.setPosition(f.x,f.y),b.animating=!1,b.options.onAnimationEnd&&b.options.onAnimationEnd.call(b),b.doAnimation();else{if(a)g=(g-e)/f.time-1,g=Math.sqrt(1-g*g),l=(f.x-c)*g+c,n=(f.y-d)*g+d;else{l=c;n=d;j=f.x-c;k=f.y-d;g=$.easing[b.options.ease](null,g-e,0,1,f.time);if(0<j||0>j)l=c+j*g;if(0<k||0>k)n=d+k*g}b.setPosition(l,n);b.animating&&(b.aniTime=requestAnimationFrame(h))}},h())):this.resetPosition(400))};
TJScroll.prototype.setTransitionTime=function(a){a+="ms";var b={};b["-"+TJScroll.vendor+"-transition-duration"]=a;this.$scroller.css(b);this.hScrollbar&&this.$hScrollbarIndicator.css("-"+TJScroll.vendor+"-transition-duration",a);this.vScrollbar&&this.$vScrollbarIndicator.css("-"+TJScroll.vendor+"-transition-duration",a)};
TJScroll.prototype.calculateMomentum=function(a,b,c,d,e){b=Math.abs(a)/b;var f=b*b/0.0012;0<a&&f>c?(c+=e/(6/(6E-4*(f/b))),b=b*c/f,f=c):0>a&&f>d&&(d+=e/(6/(6E-4*(f/b))),b=b*d/f,f=d);return{dist:f*(0>a?-1:1),time:TJScroll.mround(b/6E-4)}};
TJScroll.prototype.calculateSnap=function(a,b){var c,d,e;e=this.pagesX.length-1;c=0;for(d=this.pagesX.length;c<d;++c)if(a>=this.pagesX[c]){e=c;break}e==this.currPageX&&(0<e&&0>this.dirX)&&--e;a=this.pagesX[e];d=(d=m.abs(a-this.pagesX[this.currPageX]))?500*(m.abs(this.x-a)/d):0;this.currPageX=e;e=this.pagesY.length-1;for(c=0;c<e;++c)if(b>=this.pagesY[c]){e=c;break}e==this.currPageY&&(0<e&&0>this.dirY)&&--e;b=this.pagesY[e];c=(c=m.abs(b-this.pagesY[this.currPageY]))?500*(m.abs(this.y-b)/c):0;this.currPageY=
e;e=TJScroll.mround(Math.max(d,c))||200;return{x:a,y:b,time:e}};TJScroll.prototype.getPositionCss=function(a,b,c){this.options.useTransform?a[TJScroll.vendor+"Transform"]=TJScroll.trnOpen+b+"px,"+c+"px"+TJScroll.trnClose:(a.left=TJScroll.mround(b)+"px",a.top=TJScroll.mround(c)+"px");return a};
TJScroll.prototype.resetPosition=function(a){var b=0<=this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,c=this.y>=this.minScrollY||0<this.maxScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y;b==this.x&&c==this.y?(this.moved&&(this.moved=!1,this.options.onScrollEnd&&this.options.onScrollEnd.call(this)),this.options.hideScrollbar&&"webkit"==TJScroll.vendor&&(a={},a["-"+TJScroll.vendor+"-transition-delay"]="300ms",this.hScrollbar&&(this.$hScrollbarWrapper.css(a),this.hideScrollbar("h")),
this.vScrollbar&&(this.$vScrollbarWrapper.css(a),this.hideScrollbar("v")))):this.scrollTo(b,c,a||0)};